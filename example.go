package main

import (
	"fmt"
	"io/ioutil"
	"net/http"
	"os"
	"reflect"

	"github.com/jung-kurt/gofpdf"
)

func main() {

  url := "http://127.0.0.1:8000/html?q=%3C!DOCTYPE%20html%3E%0A%3Chtml%20lang%3D%22en%22%3E%0A%20%20%3Chead%3E%0A%20%20%20%20%3Cmeta%20charset%3D%22UTF-8%22%20%2F%3E%0A%20%20%20%20%3Cmeta%20name%3D%22viewport%22%20content%3D%22width%3Ddevice-width%2C%20initial-scale%3D1.0%22%20%2F%3E%0A%20%20%20%20%3Clink%20rel%3D%22preconnect%22%20href%3D%22https%3A%2F%2Ffonts.googleapis.com%22%20%2F%3E%0A%20%20%20%20%3Clink%20rel%3D%22preconnect%22%20href%3D%22https%3A%2F%2Ffonts.gstatic.com%22%20crossorigin%20%2F%3E%0A%20%20%20%20%3Clink%0A%20%20%20%20%20%20href%3D%22https%3A%2F%2Ffonts.googleapis.com%2Fcss2%3Ffamily%3DInter%3Awght%40400%3B500%3B600%3B700%26display%3Dswap%22%0A%20%20%20%20%20%20rel%3D%22stylesheet%22%0A%20%20%20%20%2F%3E%0A%20%20%20%20%3Ctitle%3EInvoice%3C%2Ftitle%3E%0A%20%20%3C%2Fhead%3E%0A%20%20%3Cstyle%3E%0A%20%20%20%20body%20{%0A%20%20%20%20%20%20font-family%3A%20%22Inter%22%2C%20sans-serif%3B%0A%20%20%20%20%20%20width%3A%20595px%3B%0A%20%20%20%20%20%20padding-left%3A%2032px%3B%0A%20%20%20%20%20%20padding%3A%208px%2032px%208px%3B%0A%20%20%20%20%20%20background-color%3A%20white%3B%0A%20%20%20%20%20%20margin%3A%20auto%3B%0A%20%20%20%20}%0A%20%20%20%20.topbar%20{%0A%20%20%20%20%20%20display%3A%20flex%3B%0A%20%20%20%20%20%20flex-direction%3A%20row%3B%0A%20%20%20%20%20%20justify-content%3A%20space-between%3B%0A%20%20%20%20%20%20align-items%3A%20center%3B%0A%20%20%20%20}%0A%20%20%20%20.invoice-headers%20{%0A%20%20%20%20%20%20font-weight%3A%20bold%3B%0A%20%20%20%20}%0A%20%20%20%20table%20{%0A%20%20%20%20%20%20font-size%3A%2012px%3B%0A%20%20%20%20%20%20color%3A%20%235a6770%3B%0A%20%20%20%20}%0A%20%20%20%20tr%20{%0A%20%20%20%20%20%20border-bottom%3A%201px%20solid%20%23ced3d6%3B%0A%20%20%20%20%20%20text-align%3A%20center%3B%0A%20%20%20%20}%0A%20%20%20%20td%2C%0A%20%20%20%20th%20{%0A%20%20%20%20%20%20padding%3A%2020px%3B%0A%20%20%20%20}%0A%20%20%20%20%23amounts-table%20{%0A%20%20%20%20%20%20width%3A%2050%%3B%0A%20%20%20%20}%0A%20%20%20%20%23amounts-table%20td%3Afirst-child%20{%0A%20%20%20%20%20%20text-align%3A%20left%3B%0A%20%20%20%20}%0A%0A%20%20%20%20%23items-table%20tr%20td%3Anth-child(2)%20{%0A%20%20%20%20%20%20font-weight%3A%20600%3B%0A%20%20%20%20}%0A%20%20%20%20%23items-table%20tr%20td%3Afirst-child%20{%0A%20%20%20%20%20%20font-weight%3A%20600%3B%0A%20%20%20%20}%0A%0A%20%20%20%20%23amounts-table%20td%3Alast-child%20{%0A%20%20%20%20%20%20text-align%3A%20right%3B%0A%20%20%20%20}%0A%20%20%20%20%23amounts-table%20tr%3Alast-child%20{%0A%20%20%20%20%20%20font-weight%3A%20bold%3B%0A%20%20%20%20}%0A%20%20%20%20h1%20{%0A%20%20%20%20%20%20font-weight%3A%20600%3B%0A%20%20%20%20}%0A%20%20%20%20h1%2C%0A%20%20%20%20p%20{%0A%20%20%20%20%20%20font-size%3A%2012px%3B%0A%20%20%20%20%20%20line-height%3A%2014px%3B%0A%20%20%20%20%20%20width%3A%20100%%3B%0A%20%20%20%20}%0A%20%20%20%20p%20{%0A%20%20%20%20%20%20font-weight%3A%20400%3B%0A%20%20%20%20%20%20color%3A%20%235a6770%3B%0A%20%20%20%20}%0A%0A%20%20%20%20.summary-section%20{%0A%20%20%20%20%20%20%2F*%20grid-template-columns%3A%20repeat(3%2C%20minmax(0%2C%201fr))%3B%20*%2F%0A%20%20%20%20%20%20display%3A%20flex%3B%0A%20%20%20%20%20%20flex-direction%3A%20row%3B%0A%20%20%20%20}%0A%20%20%20%20.summary-section%20div%20{%0A%20%20%20%20%20%20width%3A%2040%%3B%0A%20%20%20%20}%0A%20%20%20%20.border-b%20{%0A%20%20%20%20%20%20border-bottom%3A%201px%20solid%20%23ced3d6%3B%0A%20%20%20%20}%0A%20%20%20%20.border-t%20{%0A%20%20%20%20%20%20border-top%3A%201px%20solid%20%23ced3d6%3B%0A%20%20%20%20}%0A%20%20%20%20.border-l%20{%0A%20%20%20%20%20%20border-left%3A%201px%20solid%20%23ced3d6%3B%0A%20%20%20%20}%0A%20%20%20%20.border-r%20{%0A%20%20%20%20%20%20border-right%3A%201px%20solid%20%23ced3d6%3B%0A%20%20%20%20}%0A%20%20%20%20.issued-on-section%20{%0A%20%20%20%20%20%20display%3A%20flex%3B%0A%20%20%20%20%20%20flex-direction%3A%20column%3B%0A%20%20%20%20%20%20padding-top%3A%2020px%3B%0A%20%20%20%20%20%20padding-bottom%3A%2032px%3B%0A%20%20%20%20%20%20gap%3A%2010px%3B%0A%20%20%20%20%20%20padding-right%3A%2020px%3B%0A%20%20%20%20%20%20padding-left%3A%2020px%3B%0A%20%20%20%20}%0A%20%20%20%20.issued-on-section%20p%20{%0A%20%20%20%20%20%20white-space%3A%20nowrap%3B%0A%20%20%20%20}%0A%20%20%20%20.from-section%20{%0A%20%20%20%20%20%20border-right%3A%201px%20solid%20%23ced3d6%3B%0A%20%20%20%20%20%20padding-bottom%3A%2032px%3B%0A%20%20%20%20%20%20padding-top%3A%2020px%3B%0A%20%20%20%20}%0A%20%20%20%20.billed-to-section%20{%0A%20%20%20%20%20%20border-left%3A%201px%20solid%20%23ced3d6%3B%0A%20%20%20%20%20%20padding-top%3A%2020px%3B%0A%20%20%20%20%20%20padding-bottom%3A%2032px%3B%0A%20%20%20%20%20%20padding-left%3A%2020px%3B%0A%20%20%20%20}%0A%20%20%20%20.row-flex%20{%0A%20%20%20%20%20%20display%3A%20flex%3B%0A%20%20%20%20%20%20flex-direction%3A%20row%3B%0A%20%20%20%20%20%20align-items%3A%20center%3B%0A%20%20%20%20}%0A%20%20%3C%2Fstyle%3E%0A%20%20%3Cbody%3E%0A%20%20%20%20%3Csection%20style%3D%22margin-bottom%3A%2010px%22%20class%3D%22topbar%22%3E%0A%20%20%20%20%20%20%3Cimg%20src%3D%22.%2Fpathao-maps-logo.svg%22%20%2F%3E%0A%20%20%20%20%20%20%3Cdiv%3E%0A%20%20%20%20%20%20%20%20%3Ch1%20style%3D%22font-weight%3A%20700%3B%20font-size%3A%2028px%22%3EInvoice%3C%2Fh1%3E%0A%20%20%20%20%20%20%20%20%3Cp%3E{{invoice_id}}%3C%2Fp%3E%0A%20%20%20%20%20%20%3C%2Fdiv%3E%0A%20%20%20%20%3C%2Fsection%3E%0A%20%20%20%20%3Csection%20class%3D%22summary-section%20border-b%20border-t%22%3E%0A%20%20%20%20%20%20%3Cdiv%20style%3D%22width%3A%2030%%22%20class%3D%22from-section%22%3E%0A%20%20%20%20%20%20%20%20%3Ch1%3EFrom%3C%2Fh1%3E%0A%20%20%20%20%20%20%20%20%3Ch1%3EPathao%20Ltd.%3C%2Fh1%3E%0A%20%20%20%20%20%20%20%20%3Cp%3E{{address}}%3C%2Fp%3E%0A%20%20%20%20%20%20%3C%2Fdiv%3E%0A%20%20%20%20%20%20%3Cdiv%20style%3D%22width%3A%2030%%22%20class%3D%22issued-on-section%22%3E%0A%20%20%20%20%20%20%20%20%3Cdiv%3E%0A%20%20%20%20%20%20%20%20%20%20%3Ch1%3EIssued%20On%3C%2Fh1%3E%0A%20%20%20%20%20%20%20%20%20%20%3Cp%3E01%20Aug%2C%202024%3C%2Fp%3E%0A%20%20%20%20%20%20%20%20%3C%2Fdiv%3E%0A%20%20%20%20%20%20%20%20%3Cdiv%3E%0A%20%20%20%20%20%20%20%20%20%20%3Ch1%3EDue%20Date%3C%2Fh1%3E%0A%20%20%20%20%20%20%20%20%20%20%3Cp%3E15%20Aug%2C%202024%3C%2Fp%3E%0A%20%20%20%20%20%20%20%20%3C%2Fdiv%3E%0A%20%20%20%20%20%20%3C%2Fdiv%3E%0A%20%20%20%20%20%20%3Cdiv%20style%3D%22width%3A%2020%%22%20class%3D%22billed-to-section%22%3E%0A%20%20%20%20%20%20%20%20%3Ch1%20style%3D%22margin-bottom%3A%208px%22%3EBilled%20To%3C%2Fh1%3E%0A%20%20%20%20%20%20%20%20%3Ch1%20style%3D%22margin-bottom%3A%204px%22%3EOscorp%20Foundation%3C%2Fh1%3E%0A%20%20%20%20%20%20%20%20%3Cp%3E4852%20White%20Hart%20Lane%2C%20Sacramento%2C%20CA%2097593%3C%2Fp%3E%0A%20%20%20%20%20%20%20%20%3Cp%3E%2B0%20(000)%20123-4567%3C%2Fp%3E%0A%20%20%20%20%20%20%3C%2Fdiv%3E%0A%20%20%20%20%3C%2Fsection%3E%0A%0A%20%20%20%20%3Csection%20style%3D%22margin-top%3A%2010px%22%3E%0A%20%20%20%20%20%20%3Ctable%20id%3D%22items-table%22%20style%3D%22width%3A%20100%%22%3E%0A%20%20%20%20%20%20%20%20%3Ctr%3E%0A%20%20%20%20%20%20%20%20%20%20%3Cth%3E%23%3C%2Fth%3E%0A%20%20%20%20%20%20%20%20%20%20%3Cth%3EItem%20%26%20Description%3C%2Fth%3E%0A%20%20%20%20%20%20%20%20%20%20%3Cth%3EQty%3C%2Fth%3E%0A%20%20%20%20%20%20%20%20%20%20%3Cth%3ERate%3C%2Fth%3E%0A%20%20%20%20%20%20%20%20%20%20%3Cth%3EAmount%3C%2Fth%3E%0A%20%20%20%20%20%20%20%20%3C%2Ftr%3E%0A%20%20%20%20%20%20%20%20%3Ctr%3E%0A%20%20%20%20%20%20%20%20%20%20%3Ctd%3E1%3C%2Ftd%3E%0A%20%20%20%20%20%20%20%20%20%20%3Ctd%3EAPI%20calls%200-1000%3C%2Ftd%3E%0A%20%20%20%20%20%20%20%20%20%20%3Ctd%3E1000%3C%2Ftd%3E%0A%20%20%20%20%20%20%20%20%20%20%3Ctd%3E%E0%A7%B3%20100.00%3C%2Ftd%3E%0A%20%20%20%20%20%20%20%20%20%20%3Ctd%3E%E0%A7%B3%20200.00%3C%2Ftd%3E%0A%20%20%20%20%20%20%20%20%3C%2Ftr%3E%0A%20%20%20%20%20%20%20%20%3Ctr%3E%0A%20%20%20%20%20%20%20%20%20%20%3Ctd%3E1%3C%2Ftd%3E%0A%20%20%20%20%20%20%20%20%20%20%3Ctd%3EAPI%20calls%200-1000%3C%2Ftd%3E%0A%20%20%20%20%20%20%20%20%20%20%3Ctd%3E1000%3C%2Ftd%3E%0A%20%20%20%20%20%20%20%20%20%20%3Ctd%3E%E0%A7%B3%20100.00%3C%2Ftd%3E%0A%20%20%20%20%20%20%20%20%20%20%3Ctd%3E%E0%A7%B3%20200.00%3C%2Ftd%3E%0A%20%20%20%20%20%20%20%20%3C%2Ftr%3E%0A%20%20%20%20%20%20%20%20%3Ctr%3E%0A%20%20%20%20%20%20%20%20%20%20%3Ctd%3E1%3C%2Ftd%3E%0A%20%20%20%20%20%20%20%20%20%20%3Ctd%3EAPI%20calls%200-1000%3C%2Ftd%3E%0A%20%20%20%20%20%20%20%20%20%20%3Ctd%3E1000%3C%2Ftd%3E%0A%20%20%20%20%20%20%20%20%20%20%3Ctd%3E%E0%A7%B3%20100.00%3C%2Ftd%3E%0A%20%20%20%20%20%20%20%20%20%20%3Ctd%3E%E0%A7%B3%20200.00%3C%2Ftd%3E%0A%20%20%20%20%20%20%20%20%3C%2Ftr%3E%0A%20%20%20%20%20%20%3C%2Ftable%3E%0A%20%20%20%20%3C%2Fsection%3E%0A%20%20%20%20%3Csection%3E%0A%20%20%20%20%20%20%3Ctable%20style%3D%22margin-left%3A%20auto%22%20id%3D%22amounts-table%22%3E%0A%20%20%20%20%20%20%20%20%3Ctr%3E%0A%20%20%20%20%20%20%20%20%20%20%3Ctd%3ESubtotal%3C%2Ftd%3E%0A%20%20%20%20%20%20%20%20%20%20%3Ctd%3E%E0%A7%B3%20200.00%3C%2Ftd%3E%0A%20%20%20%20%20%20%20%20%3C%2Ftr%3E%0A%20%20%20%20%20%20%20%20%3Ctr%3E%0A%20%20%20%20%20%20%20%20%20%20%3Ctd%3EDiscount%3C%2Ftd%3E%0A%20%20%20%20%20%20%20%20%20%20%3Ctd%3E%E0%A7%B3%20-200.00%3C%2Ftd%3E%0A%20%20%20%20%20%20%20%20%3C%2Ftr%3E%0A%20%20%20%20%20%20%20%20%3Ctr%3E%0A%20%20%20%20%20%20%20%20%20%20%3Ctd%3ETax%20(0%)%3C%2Ftd%3E%0A%20%20%20%20%20%20%20%20%20%20%3Ctd%3E%E0%A7%B3%200%3C%2Ftd%3E%0A%20%20%20%20%20%20%20%20%3C%2Ftr%3E%0A%20%20%20%20%20%20%20%20%3Ctr%3E%0A%20%20%20%20%20%20%20%20%20%20%3Ctd%3ETotal%3C%2Ftd%3E%0A%20%20%20%20%20%20%20%20%20%20%3Ctd%3E%E0%A7%B3%20500.00%3C%2Ftd%3E%0A%20%20%20%20%20%20%20%20%3C%2Ftr%3E%0A%20%20%20%20%20%20%20%20%3Ctr%3E%0A%20%20%20%20%20%20%20%20%20%20%3Ctd%3EAmount%20due%3C%2Ftd%3E%0A%20%20%20%20%20%20%20%20%20%20%3Ctd%3E%E0%A7%B3%20300.00%3C%2Ftd%3E%0A%20%20%20%20%20%20%20%20%3C%2Ftr%3E%0A%20%20%20%20%20%20%3C%2Ftable%3E%0A%20%20%20%20%3C%2Fsection%3E%0A%20%20%20%20%3Cfooter%20style%3D%22margin-top%3A%2020px%22%3E%0A%20%20%20%20%20%20%3Ch1%3ENotes%3C%2Fh1%3E%0A%20%20%20%20%20%20%3Cp%3EThank%20you%20for%20the%20business!%3C%2Fp%3E%0A%20%20%20%20%20%20%3Chr%0A%20%20%20%20%20%20%20%20style%3D%22%0A%20%20%20%20%20%20%20%20%20%20display%3A%20block%3B%0A%20%20%20%20%20%20%20%20%20%20height%3A%201px%3B%0A%20%20%20%20%20%20%20%20%20%20border%3A%200%3B%0A%20%20%20%20%20%20%20%20%20%20border-top%3A%201px%20solid%20%23ced3d6%3B%0A%20%20%20%20%20%20%20%20%20%20margin%3A%201em%200%3B%0A%20%20%20%20%20%20%20%20%20%20padding%3A%200%3B%0A%20%20%20%20%20%20%20%20%22%0A%20%20%20%20%20%20%2F%3E%0A%20%20%20%20%20%20%3Cdiv%20class%3D%22topbar%22%3E%0A%20%20%20%20%20%20%20%20%3Cp%20style%3D%22width%3A150px%22%3ETerms%20%26%20Conditions%3C%2Fp%3E%0A%20%20%20%20%20%20%20%20%3Cdiv%20style%3D%22display%3A%20flex%3B%20flex-direction%3A%20row%3B%20align-items%3Acenter%3B%20text-align%3A%20left%3B%22%3E%0A%20%20%20%20%20%20%20%20%20%20%3Cp%20style%3D%22width%3A%20200px%22%3E%2B09678100800%3C%2Fp%3E%0A%20%20%20%20%20%20%20%20%20%20%3Cdiv%20style%3D%22height%3A10px%3B%20width%3A1px%3B%20margin-right%3A%2015px%22%20class%3D%22border-r%22%3E%3C%2Fdiv%3E%0A%20%20%20%20%20%20%20%20%20%20%3Cp%20style%3D%22width%3A%20200px%3B%20text-align%3Aright%22%3Esupport%40pathao.com%3C%2Fp%3E%0A%20%20%20%20%20%20%20%20%3C%2Fdiv%3E%0A%20%20%20%20%20%20%3C%2Fdiv%3E%0A%20%20%20%20%3C%2Ffooter%3E%0A%20%20%3C%2Fbody%3E%0A%3C%2Fhtml%3E%0A"
  response, err := http.Get(url)
	if err != nil {
		fmt.Println("Error making HTTP request:", err)
		return
	}
	defer response.Body.Close()

	// Read the response body into a byte slice
	body, err := ioutil.ReadAll(response.Body)
  fmt.Println(reflect.TypeOf(body))
  err = writeBytesToPDF(body, "filename.pdf")
	if err != nil {
		fmt.Println("Error reading response body:", err)
		return
	}

	// Create a new PDF document
	pdf := gofpdf.New("P", "mm", "A4", "")
	pdf.AddPage()

	// Write the response body to the PDF document
	// _, err = pdf.Write(body)
	if err != nil {
		fmt.Println("Error writing to PDF:", err)
		return
	}

	// Save the PDF to a file (optional)
	err = pdf.OutputFileAndClose("output.pdf")
	if err != nil {
		fmt.Println("Error saving PDF:", err)
		return
	}

	fmt.Println("PDF conversion successful!")
}

func writeBytesToPDF(data []byte, filename string) error {
	err := os.WriteFile(filename, data, 0644)
	if err != nil {
		return err
	}
	return nil
}